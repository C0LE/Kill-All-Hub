spawn(function()
    while wait(0.1) do
        for _, player in pairs(game:GetService("Players"):GetPlayers()) do
            pcall(function()
                local localPlayer = game:GetService("Players").LocalPlayer
                local enemyChar = player.Character
                local localChar = localPlayer.Character
                
                if player ~= localPlayer 
                and enemyChar 
                and localChar 
                and enemyChar:FindFirstChild("HumanoidRootPart") 
                and localChar:FindFirstChild("HumanoidRootPart") 
                and not enemyChar:FindFirstChildOfClass("ForceField") 
                and enemyChar:FindFirstChildOfClass("Humanoid").Health > 0 then

                    repeat
                        wait(0.1)
                        localChar.HumanoidRootPart.CFrame = enemyChar.HumanoidRootPart.CFrame

                        for _, target in pairs(game:GetService("Players"):GetPlayers()) do
                            if target ~= localPlayer and target.Character then
                                game.ReplicatedStorage.meleeEvent:FireServer(target)
                            end
                        end
                    until not enemyChar 
                        or not enemyChar:FindFirstChildOfClass("Humanoid") 
                        or enemyChar:FindFirstChildOfClass("Humanoid").Health <= 0
                end
            end)
        end
    end
end)
